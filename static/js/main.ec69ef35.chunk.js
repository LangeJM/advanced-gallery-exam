(this["webpackJsonpflickr-gallery"]=this["webpackJsonpflickr-gallery"]||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),i=a.n(c),r=a(20),o=a.n(r),s=(a(50),a(5)),l=a(86),u=a(42),d=a(37),m=a.n(d),g=(a(51),a(17)),j=a(21),b=a.n(j);b.a.setAppElement("#app");var f=function(e){var t=e.backgroundImage,a=e.closeModal;return Object(n.jsx)("div",{children:Object(n.jsx)(b.a,{isOpen:e.showModal,contentLabel:"Image Modal",style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},children:Object(n.jsx)("img",{src:t,alt:"flickr",onClick:function(){return a()}})})})},h=(a(63),a(87)),p=a(88),O=a(6),x=a.n(O),v="Image",k=function(e){var t=Object(c.useRef)(null),a=Object(c.useState)(0),i=Object(s.a)(a,2),r=i[0],o=i[1],l=Object(c.useState)(!1),u=Object(s.a)(l,2),d=u[0],m=u[1],g=e.dto,j=e.galleryWidth,b=e.deleteImage,O=e.index,k=e.moveImage,y=e.imageSize,S=e.imageUrl,N=e.modalUrl,I=Object(h.a)({accept:v,hover:function(e){if(t.current){var a=e.index,n=O;a!==n&&(k(a,n),e.index=n)}}}),C=Object(s.a)(I,2)[1],w=Object(p.a)({item:{type:v,id:g.id,index:O},collect:function(e){return{isDragging:e.isDragging()}}}),L=Object(s.a)(w,2),M=L[0].isDragging;(0,L[1])(C(t));var z=function(){m(!d)},D=Math.round(j/200),E=Math.round(j/D*y)-1;return Object(n.jsx)("div",{className:"image-root",ref:t,style:{backgroundImage:"url(".concat(S,")"),width:E+"px",height:E+"px",transform:"rotate(".concat(r,"deg)"),opacity:M?0:1},children:Object(n.jsxs)("div",{children:[Object(n.jsx)(x.a,{className:"image-icon",name:"sync-alt",title:"rotate",onClick:function(e){return function(e){e.preventDefault(),o(r+90)}(e)}}),Object(n.jsx)(x.a,{className:"image-icon",name:"trash-alt",title:"delete",onClick:function(e){return b(e,g)}}),Object(n.jsx)(x.a,{className:"image-icon",name:"expand",title:"expand",onClick:function(e){return z()}}),Object(n.jsx)(f,{showModal:d,closeModal:z,backgroundImage:N})]})})},y=(a(65),a(39)),S=a.n(y),N=a(40),I=a(41),C=a.n(I),w=function(e){var t=Object(c.useState)([]),a=Object(s.a)(t,2),i=a[0],r=a[1],o=Object(c.useState)(1e3),l=Object(s.a)(o,2),u=l[0],d=l[1],m=Object(c.useState)(0),j=Object(s.a)(m,2),b=j[0],f=j[1],h=Object(c.useRef)(0),p=function(e){var t=h.current+1,a="services/rest/?method=flickr.photos.search&api_key=522c1f9009ca3609bcbaf08545f067ad&tags=".concat(e,"&tag_mode=any&per_page=100&page=").concat(t,"&format=json&nojsoncallback=1");S()({url:a,baseURL:"https://api.flickr.com/",method:"GET"}).then((function(e){return e.data})).then((function(e){h.current+=1,e&&e.photos&&e.photos.photo&&e.photos.photo.length>0&&(1===h.current?r(Object(g.a)(e.photos.photo)):r([].concat(Object(g.a)(i),Object(g.a)(e.photos.photo)))),f(e.photos.pages)}))};Object(c.useEffect)((function(){return h.current=0,p(e.tag),d(document.body.clientWidth),window.addEventListener("resize",x),function(){window.removeEventListener("resize",x)}}),[e.tag]);var O=function(e,t){e.preventDefault(),r(i.filter((function(e){return e!==t})))},x=function(){d(document.body.clientWidth)},v=function(e,t){var a=i[e];r(C()(i,{$splice:[[e,1],[t,0,a]]}))};return Object(n.jsx)("div",{className:"gallery-root",children:Object(n.jsx)(N.a,{dataLength:i.length,hasMore:h.current>=1&&b>=h.current,next:function(){return p(e.tag)},loader:Object(n.jsx)("h4",{children:"Loading..."}),scrollThreshold:"100px",endMessage:Object(n.jsx)("p",{style:{textAlign:"center"},children:Object(n.jsx)("b",{children:"End of image list"})}),children:i.map((function(t,a){return Object(n.jsx)(k,{imageUrl:"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,".jpg"),modalUrl:"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,"_b.jpg"),dto:t,index:a,galleryWidth:u,imageSize:e.imageSize,deleteImage:O,moveImage:v},"".concat(t.id,"-").concat(a))}))})})},L=function(e){return Object(n.jsx)("div",{className:"d-flex align-items-start",children:Object(n.jsxs)("div",{className:"d-flex align-items-end",style:{height:"2rem"},children:[Object(n.jsx)(x.a,{className:"image-icon mr-2",name:"image",size:"lg",title:"imageLarge",id:"imageLarge",style:{marginBottom:"3px"},onClick:function(t){return e.handleImage(t)}}),Object(n.jsx)(x.a,{className:"image-icon mr-2",name:"image",title:"imageNormal",id:"imageNormal",onClick:function(t){return e.handleImage(t)}}),Object(n.jsx)(x.a,{className:"image-icon mr-2",name:"image",size:"xs",title:"imageSmall",id:"imageSmall",onClick:function(t){return e.handleImage(t)}})]})})},M=function(){var e=Object(c.useState)("Wiesn"),t=Object(s.a)(e,2),a=t[0],i=t[1],r=Object(c.useState)("Wiesn"),o=Object(s.a)(r,2),d=o[0],g=o[1],j=Object(c.useState)(1),b=Object(s.a)(j,2),f=b[0],h=b[1],p=Object(c.useCallback)(m()((function(e){return i(e.target.value)}),2e3),[]);return Object(n.jsxs)("div",{className:"app-root",children:[Object(n.jsxs)("div",{className:"app-header",children:[Object(n.jsx)("h2",{children:"Flickr Gallery"}),Object(n.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(n.jsx)(L,{handleImage:function(e){switch(e.preventDefault(null),console.log("clicked image with id: ".concat(e.target.id)),e.target.id){case"imageSmall":return h(.75);case"imageNormal":return h(1);case"imageLarge":return h(2);default:return h(1)}}}),Object(n.jsx)("input",{className:"app-input",onChange:function(e){return function(e){e.preventDefault(),e.persist(),g(e.target.value),p(e)}(e)},value:d}),Object(n.jsx)("div",{style:{color:"#222222",fontSize:"0.5rem"},children:"Placeholder upcoming features"})]})]}),Object(n.jsx)(l.a,{backend:u.a,children:Object(n.jsx)(w,{tag:a,imageSize:f})})]})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,89)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};a(83);o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(M,{})}),document.getElementById("app")),z()}},[[84,1,2]]]);
//# sourceMappingURL=main.ec69ef35.chunk.js.map