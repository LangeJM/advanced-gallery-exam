(this["webpackJsonpflickr-gallery"]=this["webpackJsonpflickr-gallery"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(0),r=n.n(a),o=n(19),i=n.n(o),s=(n(50),n(5)),l=n(85),u=n(42),d=(n(51),n(23)),j=n(20),f=n.n(j);f.a.setAppElement("#app");var b=function(e){var t=e.backgroundImage,n=e.closeModal;return Object(c.jsx)("div",{children:Object(c.jsx)(f.a,{isOpen:e.showModal,contentLabel:"Image Modal",style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},children:Object(c.jsx)("img",{src:t,alt:"flickr",onClick:function(){return n()}})})})},g=(n(63),n(86)),h=n(87),p=n(16),m=n.n(p),O="Image",x=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(0),r=Object(s.a)(n,2),o=r[0],i=r[1],l=Object(a.useState)(!1),u=Object(s.a)(l,2),d=u[0],j=u[1],f=e.dto,p=e.galleryWidth,x=e.deleteImage,v=e.index,k=e.moveImage,y=Object(g.a)({accept:O,hover:function(e){if(t.current){var n=e.index,c=v;n!==c&&(k(n,c),e.index=c)}}}),w=Object(s.a)(y,2)[1],I=Object(h.a)({item:{type:O,id:f.id,index:v},collect:function(e){return{isDragging:e.isDragging()}}}),M=Object(s.a)(I,2),E=M[0].isDragging;(0,M[1])(w(t));var L=function(){j(!d)},S=Math.round(p/200),C=Math.round(p/S)-1;return Object(c.jsx)("div",{className:"image-root",ref:t,style:{backgroundImage:"url(".concat(function(e){return"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,".jpg")}(f),")"),width:C+"px",height:C+"px",transform:"rotate(".concat(o,"deg)"),opacity:E?0:1},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(m.a,{className:"image-icon",name:"sync-alt",title:"rotate",onClick:function(e){return function(e){e.preventDefault(),i(o+90)}(e)}}),Object(c.jsx)(m.a,{className:"image-icon",name:"trash-alt",title:"delete",onClick:function(e){return x(e,f)}}),Object(c.jsx)(m.a,{className:"image-icon",name:"expand",title:"expand",onClick:function(e){return L()}}),Object(c.jsx)(b,{showModal:d,closeModal:L,backgroundImage:function(e){return"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,"_b.jpg")}(f)})]})})},v=(n(65),n(38)),k=n.n(v),y=n(39),w=n(40),I=n.n(w),M=n(41),E=n.n(M),L=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(1e3),l=Object(s.a)(i,2),u=l[0],j=l[1],f=Object(a.useState)(0),b=Object(s.a)(f,2),g=b[0],h=b[1],p=Object(a.useState)(0),m=Object(s.a)(p,2),O=m[0],v=m[1],w=function(e){var t=g+1,n="services/rest/?method=flickr.photos.search&api_key=522c1f9009ca3609bcbaf08545f067ad&tags=".concat(e,"&tag_mode=any&per_page=100&page=").concat(t,"&format=json&nojsoncallback=1");k()({url:n,baseURL:"https://api.flickr.com/",method:"GET"}).then((function(e){return e.data})).then((function(e){h(g+1),e&&e.photos&&e.photos.photo&&e.photos.photo.length>0&&(o([].concat(Object(d.a)(r),Object(d.a)(e.photos.photo))),v(e.photos.pages))}))};Object(a.useEffect)((function(){w(e.tag),j(document.body.clientWidth),window.addEventListener("resize",C)}),[]);var M=Object(a.useRef)(!0),L=Object(a.useRef)(I()((function(e){return w(e)}),1500)).current;Object(a.useEffect)((function(){if(!M.current)return o([]),L(e.tag),window.addEventListener("resize",C),function(){window.removeEventListener("resize",C)};M.current=!1}),[e]);var S=function(e,t){e.preventDefault(),o(r.filter((function(e){return e!==t})))},C=function(){j(document.body.clientWidth)},N=function(e,t){var n=r[e];o(E()(r,{$splice:[[e,1],[t,0,n]]}))};return Object(c.jsx)("div",{className:"gallery-root",children:Object(c.jsx)(y.a,{dataLength:r.length,hasMore:g>=1&&O>=g,next:function(){return w(e.tag)},loader:Object(c.jsx)("h4",{children:"Loading..."}),scrollThreshold:"100px",endMessage:Object(c.jsx)("p",{style:{textAlign:"center"},children:Object(c.jsx)("b",{children:"End of image list"})}),children:r.map((function(e,t){return Object(c.jsx)(x,{dto:e,index:t,galleryWidth:u,deleteImage:S,moveImage:N},t)}))})})},S=function(){var e=Object(a.useState)("Wiesn"),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(c.jsxs)("div",{className:"app-root",children:[Object(c.jsxs)("div",{className:"app-header",children:[Object(c.jsx)("h2",{children:"Flickr Gallery"}),Object(c.jsx)("input",{className:"app-input",onChange:function(e){return r(e.target.value)},value:n})]}),Object(c.jsx)(l.a,{backend:u.a,children:Object(c.jsx)(L,{tag:n})})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(S,{})}),document.getElementById("app")),C()}},[[83,1,2]]]);
//# sourceMappingURL=main.0d5efb52.chunk.js.map